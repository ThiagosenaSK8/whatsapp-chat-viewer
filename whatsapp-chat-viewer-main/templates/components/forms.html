{% macro form_field(name, label, type="text", placeholder="", value="", required=false, disabled=false, class="", help_text="", error="") %}
<!-- Campo de Formulário Reutilizável -->
<div class="mb-4 {{ class }}">
    {% if label %}
    <label for="{{ name }}" class="block text-sm font-medium text-gray-700 mb-2">
        {{ label }}
        {% if required %}<span class="text-red-500 ml-1">*</span>{% endif %}
    </label>
    {% endif %}
    
    {% if type == "textarea" %}
    <textarea 
        id="{{ name }}" 
        name="{{ name }}"
        {% if placeholder %}placeholder="{{ placeholder }}"{% endif %}
        {% if required %}required{% endif %}
        {% if disabled %}disabled{% endif %}
        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-whatsapp-green focus:border-transparent {{ 'bg-gray-50' if disabled else '' }} {{ 'border-red-500' if error else '' }}"
        rows="3">{{ value }}</textarea>
    {% elif type == "select" %}
    <select 
        id="{{ name }}" 
        name="{{ name }}"
        {% if required %}required{% endif %}
        {% if disabled %}disabled{% endif %}
        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-whatsapp-green focus:border-transparent {{ 'bg-gray-50' if disabled else '' }} {{ 'border-red-500' if error else '' }}">
        {{ caller() if caller }}
    </select>
    {% else %}
    <input 
        type="{{ type }}" 
        id="{{ name }}" 
        name="{{ name }}"
        {% if placeholder %}placeholder="{{ placeholder }}"{% endif %}
        {% if value %}value="{{ value }}"{% endif %}
        {% if required %}required{% endif %}
        {% if disabled %}disabled{% endif %}
        class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-whatsapp-green focus:border-transparent {{ 'bg-gray-50' if disabled else '' }} {{ 'border-red-500' if error else '' }}">
    {% endif %}
    
    {% if help_text %}
    <p class="text-xs text-gray-500 mt-1">{{ help_text }}</p>
    {% endif %}
    
    {% if error %}
    <p class="text-xs text-red-600 mt-1">{{ error }}</p>
    {% endif %}
</div>
{% endmacro %}

{% macro search_field(name="search", placeholder="Buscar...", value="", onchange="", class="") %}
<!-- Campo de Busca -->
<div class="relative {{ class }}">
    <input type="text" 
           id="{{ name }}" 
           name="{{ name }}"
           placeholder="{{ placeholder }}" 
           {% if value %}value="{{ value }}"{% endif %}
           {% if onchange %}oninput="{{ onchange }}"{% endif %}
           class="w-full px-3 py-2 pr-8 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-whatsapp-green focus:border-transparent">
    <i class="ri-search-line absolute right-3 top-2.5 text-gray-400 pointer-events-none" aria-hidden="true"></i>
</div>
{% endmacro %}

{% macro toggle_switch(name, label, checked=false, onchange="", disabled=false, class="") %}
<!-- Switch/Toggle -->
<div class="flex items-center justify-between {{ class }}">
    {% if label %}
    <label for="{{ name }}" class="text-sm font-medium text-gray-700">{{ label }}</label>
    {% endif %}
    
    <div class="relative">
        <input type="checkbox" 
               id="{{ name }}" 
               name="{{ name }}"
               {% if checked %}checked{% endif %}
               {% if disabled %}disabled{% endif %}
               {% if onchange %}onchange="{{ onchange }}"{% endif %}
               class="sr-only peer">
        <div class="w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-whatsapp-green/20 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-whatsapp-green {{ 'opacity-50 cursor-not-allowed' if disabled else '' }}"></div>
    </div>
</div>
{% endmacro %}

{% macro file_upload(name, label, accept="", multiple=false, required=false, class="", help_text="") %}
<!-- Upload de Arquivo -->
<div class="mb-4 {{ class }}">
    {% if label %}
    <label for="{{ name }}" class="block text-sm font-medium text-gray-700 mb-2">
        {{ label }}
        {% if required %}<span class="text-red-500 ml-1">*</span>{% endif %}
    </label>
    {% endif %}
    
    <div class="border-2 border-gray-300 border-dashed rounded-lg p-6 text-center hover:border-whatsapp-green transition-colors">
        <input type="file" 
               id="{{ name }}" 
               name="{{ name }}"
               {% if accept %}accept="{{ accept }}"{% endif %}
               {% if multiple %}multiple{% endif %}
               {% if required %}required{% endif %}
               class="hidden"
               onchange="handleFileUpload(this)">
        
        <label for="{{ name }}" class="cursor-pointer">
            <i class="ri-upload-cloud-2-line text-3xl text-gray-400 mb-2" aria-hidden="true"></i>
            <p class="text-sm text-gray-600 mb-1">Clique para fazer upload ou arraste arquivos aqui</p>
            {% if help_text %}
            <p class="text-xs text-gray-500">{{ help_text }}</p>
            {% endif %}
        </label>
        
        <div id="{{ name }}-preview" class="mt-4 hidden">
            <!-- Preview files will be shown here -->
        </div>
    </div>
</div>
{% endmacro %}

{% macro checkbox_group(name, label, options=[], selected=[], class="") %}
<!-- Grupo de Checkboxes -->
<div class="mb-4 {{ class }}">
    {% if label %}
    <fieldset>
        <legend class="text-sm font-medium text-gray-700 mb-3">{{ label }}</legend>
        <div class="space-y-2">
            {% for option in options %}
            <div class="flex items-center">
                <input type="checkbox" 
                       id="{{ name }}_{{ option.value }}" 
                       name="{{ name }}"
                       value="{{ option.value }}"
                       {% if option.value in selected %}checked{% endif %}
                       class="w-4 h-4 text-whatsapp-green border-gray-300 rounded focus:ring-whatsapp-green">
                <label for="{{ name }}_{{ option.value }}" class="ml-2 text-sm text-gray-700">
                    {{ option.label }}
                </label>
            </div>
            {% endfor %}
        </div>
    </fieldset>
    {% endif %}
</div>
{% endmacro %}